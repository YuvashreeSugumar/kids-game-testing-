*{box-sizing:border-box}
:root{
  --pink:#ff69b4; --light:#ffe4ef; --dark:#d63384; --text:#4a154b; --bg:#ffffff;
}
/* Themes */
:root[data-theme="pink"]{--pink:#ff69b4;--light:#ffe4ef;--dark:#d63384;--bg:#ffffff}
:root[data-theme="lavender"]{--pink:#c084fc;--light:#f3e8ff;--dark:#7c3aed;--bg:#ffffff}
:root[data-theme="mint"]{--pink:#34d399;--light:#d1fae5;--dark:#059669;--bg:#ffffff}
:root[data-theme="sunset"]{--pink:#fb7185;--light:#ffe4e6;--dark:#e11d48;--bg:#ffffff}

html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;color:var(--text);
  background:linear-gradient(180deg,#fff,var(--light));}
.app-header,.app-footer{
  display:flex;align-items:center;gap:10px;justify-content:space-between;padding:12px 16px;background:#fff0f7;border-bottom:3px solid var(--pink)}
.app-footer{border-top:3px solid var(--pink);border-bottom:none;justify-content:center}
h1{margin:0;font-size:clamp(1.3rem,2vw,2rem)}
.container{max-width:1100px;margin:0 auto;padding:16px}
.tabs{display:flex;gap:8px;flex-wrap:wrap}
.tab{border:2px solid var(--pink);background:#fff;border-radius:999px;padding:6px 12px;cursor:pointer}
.tab.active{background:var(--pink);color:#fff}
.header-actions{display:flex;gap:8px;align-items:center}
.btn{background:var(--pink);border:0;color:#fff;padding:8px 14px;border-radius:999px;font-weight:700;box-shadow:0 4px 0 var(--dark);cursor:pointer}
.btn.small{padding:6px 10px;font-size:.9rem}
.btn.outline{background:#fff;color:var(--dark);border:2px solid var(--pink);box-shadow:none}
.btn:active{transform:translateY(1px);box-shadow:0 3px 0 var(--dark)}
.controls{background:#fff;border:2px solid var(--pink);border-radius:16px;padding:12px;box-shadow:0 6px 0 var(--pink);margin-bottom:12px}
.control-row,.status-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between}
.panel{display:none}
.panel.active{display:block}
.input{border:2px solid var(--pink);border-radius:10px;padding:8px}
.input.small{width:80px}
.divider{height:1px;background:#eee;margin:10px 0}

/* Memory grid */
.grid{margin:16px auto;display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:min(720px,96vw)}
@media(min-width:700px){.grid{grid-template-columns:repeat(6,1fr)}}
.card{position:relative;width:100%;aspect-ratio:1/1;perspective:800px}
.inner{position:absolute;inset:0;transition:transform .6s;transform-style:preserve-3d}
.card.flipped .inner,.card.matched .inner{transform:rotateY(180deg)}
.face,.back{position:absolute;inset:0;border-radius:16px;border:3px solid var(--pink);backface-visibility:hidden}
.back{display:grid;place-items:center;background:radial-gradient(circle at 30% 30%,#fff 0%,#ffd3e6 60%,#ffadd6 100%)}
.back span{font-size:clamp(1.6rem,3vw,2.2rem)}
.face{background:#fff;transform:rotateY(180deg);display:grid;place-items:center;padding:8px}
.face img{width:86%;height:86%;object-fit:contain}

/* Coloring */
#colorCanvas{width:100%;max-width:960px;height:auto;border:3px dashed var(--pink);border-radius:16px;background:#fff}

/* Dress-up */
.dressup-stage{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}
#avatarBase{width:300px;height:400px;border:3px solid var(--pink);border-radius:16px;background:#fff}
.layer{position:relative;width:320px;min-height:420px;border:3px dashed var(--pink);border-radius:16px;background:#fff;display:flex;align-items:center;justify-content:center}
.layer img{position:absolute;left:60px;top:40px;max-width:200px;user-select:none;touch-action:none}

/* Math */
.math-area{display:grid;gap:12px;max-width:600px}
.question{font-size:2rem;text-align:center}
.answers{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.ans{border:2px solid var(--pink);background:#fff;border-radius:14px;padding:12px;font-size:1.2rem;cursor:pointer}
.feedback{min-height:24px;text-align:center}

/* Modals */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.4);display:grid;place-items:center}
.modal[hidden]{display:none}
.modal-content{background:#fff;border:3px solid var(--pink);border-radius:20px;padding:20px;box-shadow:0 10px 0 var(--pink);max-width:460px;width:92%}
.small{font-size:.9rem;color:#666}
.themes{display:flex;gap:8px;flex-wrap:wrap}
.theme{border:2px solid var(--pink);border-radius:12px;background:#fff;padding:8px 12px;cursor:pointer}
